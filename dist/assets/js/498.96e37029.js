(window.webpackJsonp=window.webpackJsonp||[]).push([[498],{989:function(e,s,t){"use strict";t.r(s);var a=t(44),r=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("br"),e._v(" "),t("h2",{attrs:{id:"validation-des-schemas"}},[e._v("Validation des schémas")]),e._v(" "),t("p",[e._v("Cette page décrit comment sont validés les schémas avant leur intégration sur "),t("code",[e._v("schema.data.gouv.fr")]),e._v(" et non comment utiliser des schémas pour valider des données.")]),e._v(" "),t("p",[e._v("Seuls les schémas considérés comme valides sont intégrés sur "),t("code",[e._v("schema.data.gouv.fr")]),e._v(". Si votre schéma comporte plusieurs versions, seules les versions valides seront automatiquement intégrées.")]),e._v(" "),t("p",[e._v("Pour tous les types de schéma, il faut que :")]),e._v(" "),t("ul",[t("li",[e._v("votre schéma soit sur un dépôt Git, à raison d'un dépôt par schéma. Ce dépôt doit pouvoir être cloné depuis Internet sans authentification préalable ;")]),e._v(" "),t("li",[e._v("votre dépôt Git doit comporter des tags indiquant les versions de votre schéma. Ces versions doivent respecter la "),t("a",{attrs:{href:"https://semver.org/lang/fr/",target:"",rel:"noopener noreferrer"}},[e._v("gestion sémantique de version semver")]),e._v(", sous la forme "),t("code",[e._v("1.3.2")]),e._v(" par exemple ;")]),e._v(" "),t("li",[e._v("votre dépôt doit comporter un fichier "),t("code",[e._v("README.md")]),e._v(" à la racine contenant une documentation du schéma indiquant par exemple le contexte de production, la gouvernance ;")]),e._v(" "),t("li",[e._v("passer avec succès les tests spécifiques au type de schéma que votre dépôt contient.")])]),e._v(" "),t("h3",{attrs:{id:"erreurs-de-validation"}},[e._v("Erreurs de validation")]),e._v(" "),t("p",[e._v("Dès lors qu'une version de votre schéma est considérée comme invalide, vous recevrez un e-mail à l'adresse e-mail déclarée lors de l'enregistrement de votre dépôt avec les erreurs. Une fois ces erreurs corrigées, votre schéma sera intégré sur "),t("code",[e._v("schema.data.gouv.fr")]),e._v(" sans action supplémentaire de votre part.")]),e._v(" "),t("h3",{attrs:{id:"validations-specifiques-au-format-table-schema"}},[e._v("Validations spécifiques au format Table Schema")]),e._v(" "),t("p",[e._v("Les dépôts contenant des schémas au format "),t("a",{attrs:{href:"https://frictionlessdata.io/specs/table-schema/",target:"",rel:"noopener noreferrer"}},[e._v("Table Schema")]),e._v(" subissent les validations supplémentaires suivantes :")]),e._v(" "),t("ul",[t("li",[e._v("le schéma doit se trouver dans un fichier "),t("code",[e._v("schema.json")]),e._v(" à la racine du dépôt ;")]),e._v(" "),t("li",[e._v("le schéma doit respecter la spécification Table Schema ;")]),e._v(" "),t("li",[e._v("la version déclarée dans le fichier "),t("code",[e._v("schema.json")]),e._v(" doit être la même que le tag Git du dépôt ;")]),e._v(" "),t("li",[e._v("le schéma comporte les "),t("a",{attrs:{href:"https://github.com/frictionlessdata/specs/blob/master/specs/patterns.md#Specification-8",target:"",rel:"noopener noreferrer"}},[e._v("clés supplémentaires")]),e._v(" suivantes à la racine du document JSON :\n"),t("ul",[t("li",[t("code",[e._v("title")]),e._v(" : le nom courant du schéma. Exemple : "),t("code",[e._v("Infrastructures de recharge de véhicules électriques")]),e._v(" ;")]),e._v(" "),t("li",[t("code",[e._v("description")]),e._v(" : la description du schéma. Exemple : "),t("code",[e._v("Spécification du fichier d'échange relatif aux données concernant la localisation géographique et les caractéristiques techniques des stations et des points de recharge pour véhicules électriques")]),e._v(";")]),e._v(" "),t("li",[t("code",[e._v("homepage")]),e._v(" : l'URL vers le dépôt Git contenant le schéma. Exemple : "),t("code",[e._v("https://github.com/etalab/schema-irve")]),e._v(".")]),e._v(" "),t("li",[t("code",[e._v("version")]),e._v(" : le numéro de version du schéma respectant la "),t("a",{attrs:{href:"https://semver.org/lang/fr/",target:"",rel:"noopener noreferrer"}},[e._v("gestion sémantique de version semver")]),e._v(". Exemple : "),t("code",[e._v("1.0.2")]),e._v(" ;")]),e._v(" "),t("li",[t("code",[e._v("contributors")]),e._v(" : les informations sur les auteurs du schéma. Exemple :")])]),e._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"contributors"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"email"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"info@data.gouv.fr"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"organisation"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Etalab"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"role"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"author"')]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])])])]),e._v(" "),t("p",[e._v("Les clés suivantes ne font pas l'objet d'une validation mais leur utilisation est encouragée pour enrichir encore davantage la description de votre schéma :")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("name")]),e._v(" : l'identifiant ou « slug » du schéma. Exemple : "),t("code",[e._v("irve")]),e._v(" ;")]),e._v(" "),t("li",[t("code",[e._v("path")]),e._v(" : l'URL vers cette version du schéma. Exemple : "),t("code",[e._v("https://github.com/etalab/schema-irve/raw/v1.0.2/schema.json")]),e._v(" ;")]),e._v(" "),t("li",[t("code",[e._v("created")]),e._v(" : la date de création initiale du schéma, au format "),t("code",[e._v("YYYY-MM-DD")]),e._v(". Exemple : "),t("code",[e._v("2018-06-29")]),e._v(" ;")]),e._v(" "),t("li",[t("code",[e._v("lastModified")]),e._v(" : la date de publication de la dernière version du schéma, au format "),t("code",[e._v("YYYY-MM-DD")]),e._v(". Exemple : "),t("code",[e._v("2019-06-28")]),e._v(" ;")]),e._v(" "),t("li",[t("code",[e._v("resources")]),e._v(" : des données tabulaires d'exemple, valides ou invalides. Exemple :")])]),e._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"resources"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"title"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Exemple de fichier IRVE valide"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"path"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://github.com/etalab/schema-irve/raw/v1.0.2/exemple-valide.csv"')]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n")])])]),t("ul",[t("li",[t("code",[e._v("sources")]),e._v(" : les documents ayant servi de base au schéma. Exemple :")])]),e._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"sources"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"title"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Décret n° 2017-26 du 12 janvier 2017 relatif aux infrastructures de recharge pour véhicules électriques et portant diverses mesures de transposition de la directive 2014/94/UE du Parlement européen et du Conseil du 22 octobre 2014 sur le déploiement d’une infrastructure pour carburants alternatifs"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token property"}},[e._v('"path"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://www.legifrance.gouv.fr/jo_pdf.do?id=JORFTEXT000033860620"')]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),t("p",[e._v("Afin de valider votre schéma, nous vous conseillons d'utiliser l'outil "),t("a",{attrs:{href:"https://pypi.org/project/goodtables",target:"",rel:"noopener noreferrer"}},[e._v("Goodtables")]),e._v(" en ligne de commande.")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Valider votre schéma TableSchema")]),e._v("\ngoodtables validate schema.json\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Valider votre fichier d'exemple par rapport au schéma")]),e._v("\ngoodtables validate --schema schema.json exemple-valide.csv\n")])])]),t("h3",{attrs:{id:"validations-specifiques-au-format-xml-schema-definition-xsd"}},[e._v("Validations spécifiques au format XML Schema Definition (XSD)")]),e._v(" "),t("p",[e._v("Les dépôts contenant des schémas au format "),t("a",{attrs:{href:"https://www.w3.org/TR/xmlschema11-1/",target:"",rel:"noopener noreferrer"}},[e._v("XML Schema Definition")]),e._v(" (XSD) subissent les validations supplémentaires suivantes :")]),e._v(" "),t("ul",[t("li",[e._v("le dépôt doit comporter un fichier "),t("code",[e._v("schemas.yml")]),e._v(" à la racine du dépôt spécifiant l'emplacement des schémas dans le dépôt ;")]),e._v(" "),t("li",[e._v("les schémas doivent respecter la norme XSD 1.1.")])]),e._v(" "),t("p",[e._v("Le fichier "),t("code",[e._v("schemas.yml")]),e._v(" doit avoir le format suivant :")]),e._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("title")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Le titre du schéma"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("description")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Une description du schéma"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("homepage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://example.com/home"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("schemas")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"schemas/foo.xsd"')]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("title")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Une description de ce sous-schéma"')]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"schemas/bar.xsd"')]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("title")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Une description de ce sous-schéma"')]),e._v("\n")])])]),t("h3",{attrs:{id:"validations-specifiques-au-format-json-schema"}},[e._v("Validations spécifiques au format JSON Schema")]),e._v(" "),t("p",[e._v("Les dépôts contenant des schémas au format "),t("a",{attrs:{href:"https://json-schema.org/",target:"",rel:"noopener noreferrer"}},[e._v("JSON Schema")]),e._v(" subissent les validations supplémentaires suivantes :")]),e._v(" "),t("ul",[t("li",[e._v("le dépôt doit comporter un fichier "),t("code",[e._v("schemas.yml")]),e._v(" à la racine du dépôt spécifiant l'emplacement des schémas dans le dépôt ;")]),e._v(" "),t("li",[e._v("les schémas doivent respecter une des normes JSON Schema.")])]),e._v(" "),t("p",[e._v("Le fichier "),t("code",[e._v("schemas.yml")]),e._v(" doit avoir le format suivant :")]),e._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("title")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Le titre du schéma"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("description")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Une description du schéma"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("homepage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"https://example.com/home"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("schemas")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"schemas/foo.json"')]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("title")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Une description de ce sous-schéma"')]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("path")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"schemas/bar.json"')]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("title")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Une description de ce sous-schéma"')]),e._v("\n")])])]),t("h3",{attrs:{id:"validations-specifiques-au-format-generique"}},[e._v("Validations spécifiques au format générique")]),e._v(" "),t("p",[t("strong",[e._v('Ce type de schéma est considéré comme un mode "dégradé". Il n\'est à utiliser que lorsque le schéma à référencer ne peut possiblement pas être raccroché à un standard déjà supporté par schema.data.gouv.fr ou dont le support pourrait être implémenté')]),e._v(". Seule la documentation sera générée et aucun contrôle ne sera effectué sur la validité du schéma référencé.")]),e._v(" "),t("p",[e._v("Les dépôts contenant des schémas au format générique subissent les validations supplémentaires suivantes :")]),e._v(" "),t("ul",[t("li",[e._v("le dépôt doit comporter un fichier "),t("code",[e._v("schema.yml")]),e._v(" à la racine du dépôt décrivant le schéma ;")]),e._v(" "),t("li",[e._v("ce fichier doit être un Yaml valide.")])]),e._v(" "),t("p",[e._v("Le fichier "),t("code",[e._v("schema.yml")]),e._v(" doit avoir le format suivant :")]),e._v(" "),t("div",{staticClass:"language-yaml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("title")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" Mon schéma très générique\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("description")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" Mon schéma très générique est vraiment très très bien.\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("homepage")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("//github.com/example/generic"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("schema\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" 1.0.0\n")])])]),t("br")])}),[],!1,null,null,null);s.default=r.exports}}]);